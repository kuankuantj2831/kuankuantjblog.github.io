# Firebase æƒé™é…ç½®æŒ‡å—

## âš ï¸ é‡è¦ï¼šå¿…é¡»é…ç½®Firebaseè§„åˆ™

æ‚¨çš„ä¸ªäººä¸­å¿ƒé¡µé¢æ˜¾ç¤º"åŠ è½½ä¸­..."æ˜¯å› ä¸º**Firebaseçš„å®‰å…¨è§„åˆ™æœªé…ç½®**ï¼Œå¯¼è‡´æ— æ³•è¯»å†™æ•°æ®ã€‚

---

## ğŸ”§ é…ç½®æ­¥éª¤

### 1. é…ç½® Firestore è§„åˆ™

1. è®¿é—® https://console.firebase.google.com
2. é€‰æ‹©é¡¹ç›® **my-blog-b5278**
3. å·¦ä¾§èœå•ç‚¹å‡» **Firestore Database**
4. ç‚¹å‡»é¡¶éƒ¨çš„ **è§„åˆ™** æ ‡ç­¾
5. å°†è§„åˆ™æ›¿æ¢ä¸ºï¼š

```javascript
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /users/{userId} {
      // åªå…è®¸ç”¨æˆ·è¯»å†™è‡ªå·±çš„æ•°æ®
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

6. ç‚¹å‡» **å‘å¸ƒ**

---

### 2. é…ç½® Storage è§„åˆ™ï¼ˆå¤´åƒä¸Šä¼ ï¼‰

1. åœ¨Firebaseæ§åˆ¶å°å·¦ä¾§èœå•ç‚¹å‡» **Storage**
2. ç‚¹å‡»é¡¶éƒ¨çš„ **è§„åˆ™** æ ‡ç­¾
3. å°†è§„åˆ™æ›¿æ¢ä¸ºï¼š

```javascript
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /avatars/{userId}/{allPaths=**} {
      // æ‰€æœ‰äººå¯ä»¥è¯»å–å¤´åƒ
      allow read: if true;
      // åªå…è®¸ç”¨æˆ·ä¸Šä¼ è‡ªå·±çš„å¤´åƒ
      allow write: if request.auth != null && request.auth.uid == userId;
    }
  }
}
```

4. ç‚¹å‡» **å‘å¸ƒ**

---

## âœ… éªŒè¯é…ç½®

é…ç½®å®Œæˆåï¼š

1. **åˆ·æ–°ä¸ªäººä¸­å¿ƒé¡µé¢**ï¼ˆæŒ‰ Ctrl + F5ï¼‰
2. **æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°**ï¼ˆæŒ‰ F12ï¼‰
3. æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼š
   - åº”è¯¥çœ‹åˆ° `âœ… æ‰¾åˆ°ç”¨æˆ·æ•°æ®` æˆ– `âœ… ç”¨æˆ·æ–‡æ¡£åˆ›å»ºæˆåŠŸ`
   - ä¸åº”è¯¥å†æœ‰ `permission-denied` é”™è¯¯

4. **æµ‹è¯•å¤´åƒä¸Šä¼ ï¼š**
   - ç‚¹å‡»å¤´åƒä¸Šçš„ç›¸æœºå›¾æ ‡
   - é€‰æ‹©ä¸€å¼ å›¾ç‰‡
   - åº”è¯¥æ˜¾ç¤º"å¤´åƒä¸Šä¼ æˆåŠŸï¼"

---

## ğŸ› è°ƒè¯•æŠ€å·§

å¦‚æœè¿˜æœ‰é—®é¢˜ï¼Œè¯·ï¼š

1. æŒ‰ **F12** æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°
2. æŸ¥çœ‹çº¢è‰²é”™è¯¯ä¿¡æ¯
3. æ§åˆ¶å°ä¼šæ˜¾ç¤ºè¯¦ç»†çš„Firebaseé…ç½®è¯´æ˜

æ‰€æœ‰æ“ä½œéƒ½ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†æ—¥å¿—ï¼Œæ–¹ä¾¿æ’æŸ¥é—®é¢˜ï¼

---

## ğŸ“ è§„åˆ™è¯´æ˜

**Firestoreè§„åˆ™ï¼š**
- `request.auth != null` - ç¡®ä¿ç”¨æˆ·å·²ç™»å½•
- `request.auth.uid == userId` - ç¡®ä¿ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®

**Storageè§„åˆ™ï¼š**
- `allow read: if true` - æ‰€æœ‰äººéƒ½å¯ä»¥æŸ¥çœ‹å¤´åƒ
- `allow write: if request.auth.uid == userId` - åªèƒ½ä¸Šä¼ åˆ°è‡ªå·±çš„æ–‡ä»¶å¤¹

è¿™æ ·æ—¢ä¿è¯äº†å®‰å…¨æ€§ï¼Œåˆå…è®¸æ­£å¸¸ä½¿ç”¨ï¼
